apiVersion: v1
kind: ReplicationController
metadata:
  name: mysql-rc
  labels:
    name: mysql-rc
spec:
  replicas: 1
  selector:
    name: mysql-pod
  template:
    metadata:
      labels: 
        name: mysql-pod
    spec:
      containers:
      - name: mysql
        image: mysql:5.6.45
        imagePullPolicy: IfNotPresent
        args: 
          - "--character-set-server=utf8mb4"
          - "--collation-server=utf8mb4_unicode_ci"   
          #Remove after first replicas=1 create 
          #- "--wsrep-new-cluster"
          #这里在执行的时候代表会创建新集
        ports:
        - containerPort: 3306
        env:
        - name: MYSQL_ROOT_PASSWORD
          value: "Hgxxmm.@6"
        - name: TZ
          value: Asia/Shanghai
        volumeMounts:
          - name: mysql-data
            mountPath: "/var/lib/mysql"
          - name: mysql-conf
            mountPath: "/etc/mysql/conf.d"
      restartPolicy: "Always"
      volumes:
        - name: mysql-data
          persistentVolumeClaim:
            claimName: mysql-claim
        - name: mysql-conf
          persistentVolumeClaim:
            claimName: cfg-claim
